{"ast":null,"code":"import _defineProperty from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/src/components/UserSignInUp.js\";\nimport React, { Component } from 'react';\nimport AllNotes from './AllNotes';\n\nvar UserSignInUp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserSignInUp, _Component);\n\n  function UserSignInUp() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UserSignInUp);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UserSignInUp)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: \"\",\n      password: \"\",\n      currentUser: {}\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.logIn = function (e) {\n      e.preventDefault();\n      fetch(\"http://localhost:3000/api/v1/login\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          username: _this.state.username,\n          password: _this.state.password\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (data) {\n        if (!data.error) {\n          localStorage.token = data.token;\n\n          _this.setState({\n            currentUser: data.user\n          });\n        } else {\n          _this.setState({\n            loginError: data.error\n          });\n        }\n      });\n    };\n\n    _this.getUserNotes = function () {\n      _this.state.currentUser.notes.map(function (note) {\n        note.title;\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(UserSignInUp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var token = localStorage.token;\n      fetch(\"http://localhost:3000/api/v1/profile\", {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (data) {\n        if (!data.error) {\n          _this2.setState({\n            currentUser: data\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var style = {\n        border: \"1px solid green\",\n        padding: \"1rem\",\n        margin: \"1rem\"\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: style,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.logIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.handleChange,\n        placeholder: \"username\",\n        name: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        onChange: this.handleChange,\n        placeholder: \"password\",\n        name: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }))), React.createElement(\"header\", {\n        className: \"App-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, this.state.currentUser.id ? React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Hello \", this.state.currentUser.username, \"!\") : null), React.createElement(AllNotes, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return UserSignInUp;\n}(Component);\n\nexport { UserSignInUp as default };","map":{"version":3,"sources":["/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/src/components/UserSignInUp.js"],"names":["React","Component","AllNotes","UserSignInUp","state","username","password","currentUser","handleChange","e","setState","target","name","value","logIn","preventDefault","fetch","method","body","JSON","stringify","headers","then","resp","json","data","error","localStorage","token","user","loginError","getUserNotes","notes","map","note","title","Authorization","style","border","padding","margin","id"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,YAArB;;IAEqBC,Y;;;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AACJC,MAAAA,QAAQ,EAAE,EADN;AAEJC,MAAAA,QAAQ,EAAE,EAFN;AAGJC,MAAAA,WAAW,EAAE;AAHT,K;;UAwBRC,Y,GAAe,UAAAC,CAAC,EAAI;AAClB,YAAKC,QAAL,qBACGD,CAAC,CAACE,MAAF,CAASC,IADZ,EACmBH,CAAC,CAACE,MAAF,CAASE,KAD5B;AAGD,K;;UACDC,K,GAAQ,UAAAL,CAAC,EAAI;AACXA,MAAAA,CAAC,CAACM,cAAF;AACAC,MAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC1CC,QAAAA,MAAM,EAAE,MADkC;AAE1CC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBf,UAAAA,QAAQ,EAAE,MAAKD,KAAL,CAAWC,QADF;AAEnBC,UAAAA,QAAQ,EAAE,MAAKF,KAAL,CAAWE;AAFF,SAAf,CAFoC;AAM1Ce,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AANiC,OAAvC,CAAL,CAUGC,IAVH,CAUQ,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACC,IAAL,EAAJ;AAAA,OAVZ,EAWGF,IAXH,CAWQ,UAAAG,IAAI,EAAI;AACZ,YAAI,CAACA,IAAI,CAACC,KAAV,EAAiB;AACfC,UAAAA,YAAY,CAACC,KAAb,GAAqBH,IAAI,CAACG,KAA1B;;AACA,gBAAKlB,QAAL,CAAc;AACZH,YAAAA,WAAW,EAAEkB,IAAI,CAACI;AADN,WAAd;AAGD,SALD,MAKO;AACL,gBAAKnB,QAAL,CAAc;AACZoB,YAAAA,UAAU,EAAEL,IAAI,CAACC;AADL,WAAd;AAGD;AACF,OAtBH;AAuBD,K;;UACDK,Y,GAAe,YAAM;AACnB,YAAK3B,KAAL,CAAWG,WAAX,CAAuByB,KAAvB,CAA6BC,GAA7B,CAAiC,UAAAC,IAAI,EAAI;AACrCA,QAAAA,IAAI,CAACC,KAAL;AACH,OAFD;AAGD,K;;;;;;;wCArDmB;AAAA;;AAClB,UAAMP,KAAK,GAAGD,YAAY,CAACC,KAA3B;AACAZ,MAAAA,KAAK,CAAC,sCAAD,EAAyC;AAC5CC,QAAAA,MAAM,EAAE,KADoC;AAE5CI,QAAAA,OAAO,EAAE;AACPe,UAAAA,aAAa,mBAAYR,KAAZ;AADN;AAFmC,OAAzC,CAAL,CAMGN,IANH,CAMQ,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACC,IAAL,EAAJ;AAAA,OANZ,EAOGF,IAPH,CAOQ,UAAAG,IAAI,EAAI;AACZ,YAAI,CAACA,IAAI,CAACC,KAAV,EAAiB;AACf,UAAA,MAAI,CAAChB,QAAL,CAAc;AACZH,YAAAA,WAAW,EAAEkB;AADD,WAAd;AAGD;AACF,OAbH;AAcD;;;6BAsCS;AACR,UAAMY,KAAK,GAAG;AAAEC,QAAAA,MAAM,EAAE,iBAAV;AAA6BC,QAAAA,OAAO,EAAE,MAAtC;AAA8CC,QAAAA,MAAM,EAAE;AAAtD,OAAd;AACA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,KAAK,EAAEH,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAM,QAAA,QAAQ,EAAE,KAAKvB,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,QAAQ,EAAE,KAAKN,YAFjB;AAGE,QAAA,WAAW,EAAC,UAHd;AAIE,QAAA,IAAI,EAAC,UAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAOE;AACE,QAAA,IAAI,EAAC,UADP;AAEE,QAAA,QAAQ,EAAE,KAAKA,YAFjB;AAGE,QAAA,WAAW,EAAC,UAHd;AAIE,QAAA,IAAI,EAAC,UAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,EAaE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbF,CADF,CADA,EAkBA;AAAQ,QAAA,SAAS,EAAC,YAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKJ,KAAL,CAAWG,WAAX,CAAuBkC,EAAvB,GACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAW,KAAKrC,KAAL,CAAWG,WAAX,CAAuBF,QAAlC,MADD,GAGG,IAJN,CAlBA,EAwBF,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAxBE,CADF;AA6BD;;;;EA5FuCJ,S;;SAArBE,Y","sourcesContent":["import React, { Component } from 'react';\nimport AllNotes from './AllNotes'\n\nexport default class UserSignInUp extends Component {\n  state = {\n      username: \"\",\n      password: \"\",\n      currentUser: {}\n    };\n\n  componentDidMount() {\n    const token = localStorage.token;\n    fetch(\"http://localhost:3000/api/v1/profile\", {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        if (!data.error) {\n          this.setState({\n            currentUser: data\n          });\n        }\n      });\n  }\n\n  handleChange = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  };\n  logIn = e => {\n    e.preventDefault();\n    fetch(\"http://localhost:3000/api/v1/login\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        username: this.state.username,\n        password: this.state.password\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        if (!data.error) {\n          localStorage.token = data.token;\n          this.setState({\n            currentUser: data.user\n          });\n        } else {\n          this.setState({\n            loginError: data.error\n          });\n        }\n      });\n  };\n  getUserNotes = () => {\n    this.state.currentUser.notes.map(note => {\n        note.title\n    })\n  }\n  render () {\n    const style = { border: \"1px solid green\", padding: \"1rem\", margin: \"1rem\" };\n    return (\n      <div>\n      <div style={style}>\n        <form onSubmit={this.logIn}>\n          <input\n            type=\"text\"\n            onChange={this.handleChange}\n            placeholder=\"username\"\n            name=\"username\"\n          />\n          <input\n            type=\"password\"\n            onChange={this.handleChange}\n            placeholder=\"password\"\n            name=\"password\"\n          />\n          <input type=\"submit\" />\n        </form>\n      </div>\n      <header className=\"App-header\">\n        {this.state.currentUser.id ? (\n          <h1>Hello {this.state.currentUser.username}!</h1>\n\n        ) : null}\n      </header>\n    <AllNotes />\n\n    </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}