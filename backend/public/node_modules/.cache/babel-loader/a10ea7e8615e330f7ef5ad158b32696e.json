{"ast":null,"code":"import _toConsumableArray from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport { Route, Switch, Redirect, withRouter } from \"react-router-dom\"; // import { Alert } from \"reactstrap\"\n\nimport './App.css';\nimport Header from './components/Header';\nimport UserSignIn from './components/UserSignIn';\nimport UserSignUp from './components/UserSignUp';\nimport HomePage from './Pages/HomePage';\nimport AboutPage from './Pages/AboutPage';\nimport ContactPage from './Pages/ContactPage';\nimport UserNotePage from './Pages/UserNotePage';\nimport UserProfile from './Pages/UserProfile'; // import FullNote from './containers/FullNote';\n// import CreateNoteForm from './components/CreateNoteForm';\n// import EditNoteForm from './components/EditNoteForm';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      currentUser: {\n        notes: []\n      },\n      loginError: \"\",\n      userSignedIn: false,\n      currentNote: {},\n      displaySearchResults: [],\n      isSearchResults: false,\n      isCurrentNote: false\n    };\n\n    _this.logInApp = function (data) {\n      if (!data.error) {\n        localStorage.token = data.token;\n\n        _this.getUser();\n      } else {\n        window.confirm(data.error);\n\n        _this.setState({\n          loginError: data.error\n        });\n      }\n    };\n\n    _this.signUpApp = function (data) {\n      // debugger\n      // console.log(data.error)\n      if (!data.error) {\n        localStorage.token = data.token;\n\n        _this.getUser();\n      } else {\n        // window.confirm(data.error)\n        _this.setState({\n          loginError: data.error\n        });\n      }\n\n      ;\n    };\n\n    _this.userLogOut = function () {\n      _this.setState({\n        currentUser: {},\n        userSignedIn: false\n      });\n    };\n\n    _this.createNoteApp = function (data) {\n      _this.setState({\n        currentUser: _objectSpread({}, _this.state.currentUser, {\n          notes: _toConsumableArray(_this.state.currentUser.notes).concat([data])\n        }),\n        currentNote: data\n      });\n    };\n\n    _this.editNoteApp = function (data) {\n      _this.setState({\n        currentUser: _objectSpread({}, _this.state.currentUser, {\n          notes: [_this.state.currentUser.notes.id, data]\n        }),\n        currentNote: data\n      });\n    };\n\n    _this.deleteNoteApp = function (data) {\n      _this.setState({\n        // currentUser: {...this.state.currentUser, notes: [...this.state.currentUser.notes, data]},\n        currentNote: data\n      });\n    };\n\n    _this.handleUpdateCurrentNote = function (id, title, location, content) {\n      _this.setState({\n        currentNote: {\n          id: id,\n          title: title,\n          location: location,\n          content: content\n        }\n      });\n    };\n\n    _this.handleSearch = function (searchTerm) {\n      var searchResults = _this.state.currentUser.notes.filter(function (note) {\n        return note.title.toLowerCase().includes(searchTerm.toLowerCase()) || note.location.toLowerCase().includes(searchTerm.toLowerCase()) || note.content.toLowerCase().includes(searchTerm.toLowerCase());\n      });\n\n      if (_this.state.displaySearchResults) {\n        _this.setState({\n          displaySearchResults: searchResults,\n          isSearchResults: true\n        });\n      } else {\n        _this.setState({\n          isSearchResults: false\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUser();\n    }\n  }, {\n    key: \"getUser\",\n    value: function getUser() {\n      var _this2 = this;\n\n      var token = localStorage.token;\n\n      if (token) {\n        fetch(\"http://localhost:3000/api/v1/profile\", {\n          method: \"GET\",\n          headers: {\n            Authorization: \"Bearer \".concat(token)\n          }\n        }).then(function (resp) {\n          return resp.json();\n        }).then(function (data) {\n          if (!data.error) {\n            _this2.setState({\n              currentUser: data,\n              userSignedIn: true,\n              currentNote: data.notes[0],\n              isCurrentNote: true\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Header, {\n        userSignedIn: this.state.userSignedIn,\n        username: this.state.currentUser.username,\n        userLogOut: this.userLogOut,\n        currentNote: this.state.currentNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/about\",\n        component: AboutPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/contact\",\n        component: ContactPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), this.state.userSignedIn ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/:user/journal_entries\",\n        render: function render(routerProps) {\n          return React.createElement(UserNotePage, {\n            userSignedIn: _this3.state.userSignedIn,\n            currentUser: _this3.state.currentUser,\n            userNotes: _this3.state.currentUser.notes,\n            currentNote: _this3.state.currentNote,\n            handleUpdateCurrentNote: _this3.handleUpdateCurrentNote,\n            handleSearch: _this3.handleSearch,\n            displaySearchResults: _this3.state.displaySearchResults,\n            createNoteApp: _this3.createNoteApp,\n            isSearchResults: _this3.state.isSearchResults,\n            editNoteApp: _this3.editNoteApp,\n            deleteNoteApp: _this3.deleteNoteApp,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/:user/profile\",\n        render: function render(routerProps) {\n          return React.createElement(UserProfile, {\n            userSignedIn: _this3.state.userSignedIn,\n            currentUser: _this3.state.currentUser,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 166\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        component: HomePage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), React.createElement(Redirect, {\n        to: \"/\".concat(this.state.currentUser.username, \"/journal_entries/current\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      })) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/login\",\n        render: function render(routerProps) {\n          return React.createElement(UserSignIn, {\n            logInApp: _this3.logInApp,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 177\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/signup\",\n        render: function render(routerProps) {\n          return React.createElement(UserSignUp, {\n            signUpApp: _this3.signUpApp,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        component: HomePage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/becci/Development/mod4.5project/rails-react-evernote-unstarter/frontend/src/App.js"],"names":["React","Component","Route","Switch","Redirect","withRouter","Header","UserSignIn","UserSignUp","HomePage","AboutPage","ContactPage","UserNotePage","UserProfile","App","state","currentUser","notes","loginError","userSignedIn","currentNote","displaySearchResults","isSearchResults","isCurrentNote","logInApp","data","error","localStorage","token","getUser","window","confirm","setState","signUpApp","userLogOut","createNoteApp","editNoteApp","id","deleteNoteApp","handleUpdateCurrentNote","title","location","content","handleSearch","searchTerm","searchResults","filter","note","toLowerCase","includes","fetch","method","headers","Authorization","then","resp","json","username","routerProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  Route,\n  Switch,\n  Redirect,\n  withRouter\n} from \"react-router-dom\";\n// import { Alert } from \"reactstrap\"\nimport './App.css';\nimport Header from './components/Header';\nimport UserSignIn from './components/UserSignIn';\nimport UserSignUp from './components/UserSignUp';\nimport HomePage from './Pages/HomePage';\nimport AboutPage from './Pages/AboutPage';\nimport ContactPage from './Pages/ContactPage';\nimport UserNotePage from './Pages/UserNotePage';\nimport UserProfile from './Pages/UserProfile';\n// import FullNote from './containers/FullNote';\n// import CreateNoteForm from './components/CreateNoteForm';\n// import EditNoteForm from './components/EditNoteForm';\n\n\nclass App extends Component {\n  state = {\n    currentUser: {\n      notes: []\n    },\n    loginError: \"\",\n    userSignedIn: false,\n    currentNote: {},\n    displaySearchResults: [],\n    isSearchResults: false,\n    isCurrentNote: false\n  }\n\n  componentDidMount() {\n    this.getUser()\n  }\n\n  getUser(){\n    const token = localStorage.token;\n    if(token){\n      fetch(\"http://localhost:3000/api/v1/profile\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      })\n      .then(resp => resp.json())\n      .then(data => {\n        if (!data.error) {\n          this.setState({\n            currentUser: data,\n            userSignedIn: true,\n            currentNote: data.notes[0],\n            isCurrentNote:true\n          });\n        }\n      });\n    }\n  }\n\n  logInApp = data => {\n    if (!data.error) {\n      localStorage.token = data.token;\n      this.getUser()\n    } else {\n      window.confirm(data.error)\n      this.setState({\n        loginError: data.error\n      });\n    }\n  };\n\n  signUpApp = data => {\n    // debugger\n    // console.log(data.error)\n    if (!data.error){\n      localStorage.token = data.token;\n      this.getUser()\n    } else {\n      // window.confirm(data.error)\n      this.setState({\n        loginError: data.error\n      });\n    };\n  };\n\n  userLogOut = () => {\n    this.setState({\n      currentUser: {},\n      userSignedIn: false\n    });\n  };\n\n  createNoteApp = data => {\n    this.setState({\n      currentUser: {...this.state.currentUser, notes: [...this.state.currentUser.notes, data]},\n      currentNote: data\n    });\n  };\n  editNoteApp = data => {\n    this.setState({\n      currentUser: {...this.state.currentUser, notes: [this.state.currentUser.notes.id, data]},\n       currentNote: data\n    });\n  };\n  deleteNoteApp = data => {\n    this.setState({\n      // currentUser: {...this.state.currentUser, notes: [...this.state.currentUser.notes, data]},\n      currentNote: data\n    })\n  }\n\n  handleUpdateCurrentNote = (id, title, location, content) => {\n    this.setState({\n      currentNote: {id, title, location, content}\n    });\n  };\n\n  handleSearch = (searchTerm) => {\n    let searchResults = this.state.currentUser.notes.filter(note => note.title.toLowerCase().includes(searchTerm.toLowerCase())|| note.location.toLowerCase().includes(searchTerm.toLowerCase())|| note.content.toLowerCase().includes(searchTerm.toLowerCase()));\n    if (this.state.displaySearchResults) {\n      this.setState({\n       displaySearchResults: searchResults,\n       isSearchResults: true\n     });\n    } else {\n      this.setState({\n        isSearchResults: false\n      })\n    }\n  };\n\n\n  render() {\n\n\n    return (\n      <div className=\"App\">\n        <Header\n          userSignedIn={this.state.userSignedIn}\n          username={this.state.currentUser.username}\n          userLogOut={this.userLogOut}\n          currentNote={this.state.currentNote}\n        />\n        <Switch>\n          <Route path=\"/about\" component={AboutPage} />\n          <Route path=\"/contact\" component={ContactPage} />\n          { this.state.userSignedIn ? (\n            <React.Fragment>\n              <Route path='/:user/journal_entries' render={(routerProps)=>{\n                return <UserNotePage\n                  userSignedIn={this.state.userSignedIn}\n                  currentUser={this.state.currentUser}\n                  userNotes={this.state.currentUser.notes}\n                  currentNote={this.state.currentNote}\n                  handleUpdateCurrentNote={this.handleUpdateCurrentNote}\n                  handleSearch={this.handleSearch}\n                  displaySearchResults={this.state.displaySearchResults}\n                  createNoteApp={this.createNoteApp}\n                  isSearchResults={this.state.isSearchResults} editNoteApp={this.editNoteApp}\n                  deleteNoteApp={this.deleteNoteApp}/>\n                }}/>\n              <Route path='/:user/profile' render={(routerProps)=>{\n                return <UserProfile\n                  userSignedIn={this.state.userSignedIn}\n                  currentUser={this.state.currentUser}\n                />\n                }} />\n              <Route exact path=\"/\" component={HomePage} />\n              <Redirect to={`/${this.state.currentUser.username}/journal_entries/current`} />\n            </React.Fragment>\n          ) : (\n          <React.Fragment>\n            <Route path=\"/login\" render={(routerProps)=>{\n              return <UserSignIn\n                logInApp={this.logInApp} />}}\n              />\n            <Route path=\"/signup\" render={(routerProps)=>{\n              return <UserSignUp signUpApp={this.signUpApp}/>\n              }}/>\n            <Route exact path=\"/\" component={HomePage} />\n            <Redirect to='/'/>\n          </React.Fragment>\n          )}\n\n        </Switch>\n\n        {/* <Footer /> */}\n      </div>\n    );\n  }\n}\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}